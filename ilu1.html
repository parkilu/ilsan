<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <!-- ì†ê°€ë½ í™•ëŒ€/ì¶•ì†Œ ê¸ˆì§€ -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>ì—´ì°¨ë²ˆí˜¸ ë° í¸ì„±ì •ë³´ ì¡°íšŒ</title>
  <style>
    /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
    body {
      margin: 0;
      padding: 0;
      background: #f7f9fc;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      color: #333;
    }
    .container {
      position: relative;
      width: 90%;
      max-width: 600px;
      margin: 40px auto;
      background: #fff;
      padding: 25px 30px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    /* ì œì‘ì ì •ë³´ */
    .footer {
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 0.8rem;
      color: #777;
    }
    /* ì œëª© ìŠ¤íƒ€ì¼ */
    h1 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 1.5rem;
      color: #222;
    }
    h2 {
      font-size: 1.2rem;
      margin: 0;
      color: #222;
    }
    /* ë‚ ì§œ ì„ íƒ ì˜ì—­ */
    .date-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 15px;
    }
    .date-input {
      flex: 1;
    }
    .date-input label,
    .date-input input {
      display: block;
      width: 100%;
    }
    .date-input input {
      padding: 10px 12px;
      font-size: 1rem;
      border: 2px solid #007aff;
      border-radius: 6px;
      margin-top: 5px;
      background-color: #e7f1ff;
      box-shadow: 0 2px 4px rgba(0,123,255,0.2);
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .date-input input:focus {
      outline: none;
      border-color: #005bb5;
      box-shadow: 0 2px 8px rgba(0,91,181,0.3);
    }
    .date-info {
      flex: 1;
      color: #d9534f;
      font-size: 0.8rem;
      text-align: right;
      line-height: 1.4;
      padding-left: 10px;
    }
    /* ë²„íŠ¼ ê·¸ë£¹ (ë…¸ì„ , íšŒì‚¬ì½”ë“œ) */
    .button-group {
      display: flex;
      gap: 10px;
    }
    .group-btn {
      flex: 1;
      padding: 8px;
      font-size: 0.95rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      background: #fff;
      color: #333;
      cursor: pointer;
      transition: background 0.2s, border-color 0.2s;
    }
    .group-btn.active {
      background: #007aff;
      color: #fff;
      border-color: #007aff;
    }
    /* ì…ë ¥í¼ ì˜ì—­: ë‘ ì˜ì—­ì„ ì¢Œìš°ë¡œ ë°°ì¹˜ */
    .row {
      display: flex;
      flex-wrap: nowrap;
      gap: 15px;
      margin-bottom: 20px;
      overflow-x: hidden;
    }
    .column {
      flex: 1 1 0;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    /* ìˆ˜ì§ êµ¬ë¶„ì„  */
    .divider {
      width: 1px;
      background-color: #ccc;
    }
    label {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 4px;
      color: #555;
    }
    /* input, button ê³µí†µ ìŠ¤íƒ€ì¼ */
    input, button {
      padding: 8px 10px;
      font-size: 0.95rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      transition: border-color 0.2s;
    }
    input:focus {
      outline: none;
      border-color: #66afe9;
    }
    button {
      background: #007aff;
      color: #fff;
      cursor: pointer;
      border: none;
      transition: background 0.2s;
    }
    button:hover {
      background: #005bb5;
    }
    /* ì„ íƒë°•ìŠ¤ ë†’ì´ ì¡°ì •: ì—­ëª… ì„ íƒê³¼ ì—´ì°¨ë²ˆí˜¸ ì…ë ¥ ë™ì¼í•˜ê²Œ */
    #station, #trainNumber {
      height: 38px;
    }
    /* ì—´ì°¨ë²ˆí˜¸ ì…ë ¥ ë°•ìŠ¤ì˜ ê°€ë¡œ í­ ì¤„ì´ê¸° */
    #trainNumber {
      width: 120px;
    }
    /* ê²°ê³¼ ì œëª© ì˜ì—­ */
    .timetable-title, .traininfo-title {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .timetable-notice, .traininfo-notice {
      color: #d9534f;
      font-size: 0.8rem;
      text-align: right;
      line-height: 1.3;
    }
    /* ì›€ì§ì´ëŠ” ê¸°ì°¨ ì´ëª¨í‹°ì½˜ */
    .train-icon {
      display: inline-block;
      margin-right: 5px;
      animation: moveTrain 2s linear infinite;
    }
    @keyframes moveTrain {
      0% { transform: translateX(0); }
      50% { transform: translateX(5px); }
      100% { transform: translateX(0); }
    }
    /* ì‹œê°„í‘œ ê²°ê³¼ ì˜ì—­ */
    .iframe-container-timetable {
      width: 100%;
      height: 400px;
      margin-bottom: 25px;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      overflow-y: auto;
      position: relative;
    }
    .iframe-container-timetable iframe {
      width: 100%;
      height: 1200px;
      border: none;
    }
    /* í¸ì„±ì •ë³´ ê²°ê³¼ ì˜ì—­ */
    .result-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    .result-table td {
      padding: 0;
      border: 1px solid #e0e0e0;
    }
    .result-container {
      width: 100%;
      height: 300px;
      overflow: hidden;
      position: relative;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
    }
    .result-iframe {
      border: none;
      position: absolute;
      width: 1200px;
      height: 1200px;
      left: 0;
      top: 0;
    }
    /* ìµœìƒë‹¨ ì´ë™ ë²„íŠ¼ */
    .scroll-to-top {
      position: fixed;
      right: 20px;
      bottom: 20px;
      width: 50px;
      height: 50px;
      background: #007aff;
      color: #fff;
      border: none;
      border-radius: 50%;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
  </style>
  <script>
    let selectedCompany = "S";
    let selectedLine = "Seoul_Line_3"; // ê¸°ë³¸ê°’

    function setCompany(code) {
      selectedCompany = code;
      document.getElementById("companyS").classList.toggle("active", code === "S");
      document.getElementById("companyK").classList.toggle("active", code === "K");
    }

    function setLine(lineCode) {
      selectedLine = lineCode;
      document.getElementById("lineSeoul").classList.toggle("active", lineCode === "Seoul_Line_3");
      document.getElementById("lineKorail").classList.toggle("active", lineCode === "korail");
      populateStations();
    }

    // ì†ŒìŠ¤ë³´ê¸° ì°¨ë‹¨ ìŠ¤í¬ë¦½íŠ¸ (ì™„ë²½í•˜ì§€ ì•ŠìŒ)
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
    });
    document.onkeydown = function(e) {
      if (e.keyCode === 123 || 
         (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) ||
         (e.ctrlKey && e.keyCode === 85)) {
        e.preventDefault();
        return false;
      }
    };

    const stationsData = {
      "Seoul_Line_3": [
        { name: "ì‚¼ì†¡", value: "7IK87Iah" },
        { name: "ì›í¥", value: "7JuQ7Z2l" },
        { name: "ì›ë‹¹", value: "7JuQ64u5" },
        { name: "í™”ì •", value: "7ZmU7KCV" },
        { name: "ëŒ€ê³¡(ì¼)", value: "64yA6rOh" },
        { name: "ë°±ì„", value: "67Cx7ISd" },
        { name: "ë§ˆë‘", value: "66eI65GQ" },
        { name: "ì •ë°œì‚°", value: "7KCV67Cc7IKw" },
        { name: "ì£¼ì—½", value: "7KO87Je9" },
        { name: "ëŒ€í™”", value: "64yA7ZmU" }
      ],
      "korail": [
        { name: "ëŒ€ê³¡(ê²½)", value: "64yA6rOh" },
        { name: "ëŒ€ê³¡(ì„œ)", value: "64yA6rOh" },
        { name: "ê³¡ì‚°", value: "6rOh7IKw" },
        { name: "ë°±ë§ˆ", value: "67Cx66eI" },
        { name: "í’ì‚°", value: "7ZKN7IKw" },
        { name: "ì¼ì‚°", value: "7J287IKw" },
        { name: "íƒ„í˜„", value: "7YOE7ZiE" },
        { name: "ì•¼ë‹¹", value: "7JW864u5" },
        { name: "ìš´ì •", value: "7Jq07KCV" },
        { name: "ê¸ˆë¦‰", value: "6riI66aJ" },
        { name: "ê¸ˆì´Œ", value: "6riI7LSM" },
        { name: "ì›”ë¡±", value: "7JuU66Gx" },
        { name: "íŒŒì£¼", value: "7YyM7KO8" },
        { name: "ë¬¸ì‚°", value: "66y47IKw" },
        { name: "ìš´ì²œ", value: "7Jq07LKc" },
        { name: "ì„ì§„ê°•", value: "7J6E7KeE6rCV" }
      ]
    };

    function populateStations() {
      const stationSelect = document.getElementById('station');
      const stations = stationsData[selectedLine] || [];
      stationSelect.innerHTML = "";
      stations.forEach((station, idx) => {
        const opt = document.createElement('option');
        opt.value = station.value + "|" + selectedLine;
        opt.textContent = station.name;
        if(idx === 0) opt.selected = true;
        stationSelect.appendChild(opt);
      });
    }

    function loadTimetable() {
      const dateInput = document.getElementById('date').value;
      const stationValue = document.getElementById('station').value;
      if (!dateInput || !stationValue) {
        alert("ë‚ ì§œì™€ ì—­ ì •ë³´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");
        return;
      }
      const [q, c] = stationValue.split('|');
      const dateStr = dateInput.replace(/-/g, '');
      const url = `https://rail.blue/railroad/logis/metrotimetable.aspx?q=${q}&c=${c}&date=${dateStr}&skip=1&hz=0&sec=0&option=448&base=1#!`;
      document.getElementById('timetableFrame').src = url;
    }

    function scrollTimetableTo30Percent() {
      const container = document.getElementById('iframeContainerTimetable');
      container.scrollTop = (container.scrollHeight - container.clientHeight) * 0.3;
    }

    function loadTrainInfo() {
      const date = document.getElementById("date").value;
      const trainNum = document.getElementById("trainNumber").value.trim();
      if (!date || !trainNum) {
        alert("ë‚ ì§œì™€ ì—´ì°¨ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }
      if (!/^\d{4}$/.test(trainNum)) {
        alert("ì—´ì°¨ë²ˆí˜¸ëŠ” 4ìë¦¬ ìˆ«ìì—¬ì•¼ í•©ë‹ˆë‹¤.");
        return;
      }
      var trainNumberParam = (selectedCompany === "S") ? trainNum : (selectedCompany + trainNum);
      var url = "https://tabriz.kr/tripinfo/?company=" + selectedCompany +
                "&date=" + date +
                "&trainNumber=" + trainNumberParam;
      var resultIframe = document.getElementById("resultIframe");
      resultIframe.src = url;
      var iframeHeight = 1200;
      var verticalOffset = iframeHeight * 0.27;
      resultIframe.style.top = "-" + verticalOffset + "px";
      resultIframe.style.left = "0px";
      
      document.getElementById('resultContainer').scrollIntoView({ behavior: 'smooth' });
      
      const traininfoNotice = document.getElementById("traininfoNotice");
      traininfoNotice.innerHTML = `<span class="train-icon">ğŸš†</span>ë¡œë”©ì¤‘`;
      setTimeout(() => {
        traininfoNotice.textContent = "";
      }, 5000);
    }

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    window.onload = function() {
      setLine("Seoul_Line_3");
      populateStations();
      loadTimetable();
      setCompany("S");
      document.getElementById("timetableFrame").addEventListener("load", scrollTimetableTo30Percent);
      document.getElementById("trainNumber").addEventListener("keydown", function(e) {
        if (e.key === "Enter") {
          e.preventDefault();
          loadTrainInfo();
        }
      });
    };
  </script>
  <style>
    /* ìµœìƒë‹¨ ì´ë™ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .scroll-to-top {
      position: fixed;
      right: 20px;
      bottom: 20px;
      width: 50px;
      height: 50px;
      background: #007aff;
      color: #fff;
      border: none;
      border-radius: 50%;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="footer">ì¼ì‚°ê±´ì¶•ì‚¬ì—…ì†Œ ë°•ì¼ìš°</div>
    <h1>ì—´ì°¨ë²ˆí˜¸ ë° í¸ì„±ì •ë³´ ì¡°íšŒ</h1>
    <!-- ë‚ ì§œ ì„ íƒ ì˜ì—­ -->
    <div class="date-row">
      <div class="date-input">
        <label for="date">ë‚ ì§œ:</label>
        <input type="date" id="date" value="2025-02-24" required>
      </div>
      <div class="date-info">
        ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”<br>
        í¸ì„±ë²ˆí˜¸ëŠ” íŠ¹ì •ì—´ì°¨ì˜ ê³ ìœ ë²ˆí˜¸<br>
        ì—´ì°¨ë²ˆí˜¸ëŠ” ë§¤ì¼ ë³€ê²½
      </div>
    </div>
    <!-- ì…ë ¥í¼ ì˜ì—­ -->
    <div class="row">
      <div class="column">
        <label>ë…¸ì„  ì„ íƒ:</label>
        <!-- ë…¸ì„  ì„ íƒ ë²„íŠ¼ ê·¸ë£¹ -->
        <div class="button-group">
          <button type="button" class="group-btn" id="lineSeoul" onclick="setLine('Seoul_Line_3')">ì¼ì‚°</button>
          <button type="button" class="group-btn" id="lineKorail" onclick="setLine('korail')">ê²½ì˜</button>
        </div>
        <label for="station">ì—­ëª… ì„ íƒ:</label>
        <select id="station"></select>
        <button type="button" onclick="loadTimetable()">ì‹œê°„í‘œ ì¡°íšŒ</button>
      </div>
      <div class="divider"></div>
      <div class="column">
        <label>íšŒì‚¬ ì½”ë“œ:</label>
        <!-- íšŒì‚¬ì½”ë“œ ì„ íƒ ë²„íŠ¼ ê·¸ë£¹ -->
        <div class="button-group">
          <button type="button" class="group-btn" id="companyS" onclick="setCompany('S')">S</button>
          <button type="button" class="group-btn" id="companyK" onclick="setCompany('K')">K</button>
        </div>
        <label for="trainNumber">ì—´ì°¨ë²ˆí˜¸ (4ìë¦¬):</label>
        <input type="text" id="trainNumber" pattern="\d{4}" maxlength="4" placeholder="ì˜ˆ: 3393" required>
        <button type="button" onclick="loadTrainInfo()">í¸ì„±ì •ë³´ ì¡°íšŒ</button>
      </div>
    </div>
    <!-- ê²°ê³¼ ì˜ì—­ -->
    <div class="timetable-title">
      <h2>ì‹œê°„í‘œ ê²°ê³¼</h2>
      <div class="timetable-notice">
        ì—´ì°¨ë²ˆí˜¸ í´ë¦­í•˜ì—¬ ì§€ì—°ì‹œê°„ í™•ì¸<br>
        ì§€ì—°ì‹œê°„ ì¶”ê°€í•˜ì—¬ ë¡œê·¸ì‹œê°„ê³¼ ë¹„êµ
      </div>
    </div>
    <div class="iframe-container-timetable" id="iframeContainerTimetable">
      <iframe id="timetableFrame"></iframe>
    </div>
    <div class="traininfo-title">
      <h2>í¸ì„±ì •ë³´ ê²°ê³¼</h2>
      <div class="traininfo-notice" id="traininfoNotice"></div>
    </div>
    <table class="result-table">
      <tr>
        <td>
          <div class="result-container" id="resultContainer">
            <iframe id="resultIframe" class="result-iframe"></iframe>
          </div>
        </td>
      </tr>
    </table>
  </div>
  <!-- ìµœìƒë‹¨ ì´ë™ ë²„íŠ¼ -->
  <button class="scroll-to-top" onclick="scrollToTop()">â†‘</button>
</body>
</html>
